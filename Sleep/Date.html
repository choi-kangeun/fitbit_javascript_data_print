<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet">
    <title>Fitbit</title>
</head>

<body>
    <h1 class="fitbit" id="title">Get Sleep Log by Date</h1>

    <nav class="primary-nav">
        <ul>
            <!-- <li class="menu-item current"><a href="/">Home</a></li> -->
        </ul>

        <script>
            const myList = document.querySelector("ul");
            const access_token = "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyMzk2WVkiLCJzdWIiOiJCR0hRWDQiLCJpc3MiOiJGaXRiaXQiLCJ0eXAiOiJhY2Nlc3NfdG9rZW4iLCJzY29wZXMiOiJyc29jIHJlY2cgcnNldCByb3h5IHJudXQgcnBybyByc2xlIHJjZiByYWN0IHJyZXMgcmxvYyByd2VpIHJociBydGVtIiwiZXhwIjoxNjc4MjkxMTkzLCJpYXQiOjE2NzgyNjIzOTN9.Id4LLZv-WSqHBCs4LBlOApSS_LFLd4zIIilb91XIDH8"
            const aaa = document.getElementById("aaa");
            const json_data = fetch('https://api.fitbit.com/1.2/user/-/sleep/date/2023-03-02.json', {
                method: "GET",
                headers: { "Authorization": "Bearer " + access_token },
            })
                .then(response => response.json())
                .then((data) => {
                    for (var product of data.sleep) {
                        const brr = document.createElement("br");
                        console.log(product.levels.data);
                        console.log(product.levels.shortData);
                        console.log(product.levels.summary);
                        //console.log("len : " + product.levels.data.length);
                        //for (var i = 0; i < product.levels.data.length; i++) {
                        const span = document.createElement("span");
                        const br = document.createElement("br");
                        var str = "";
                        /*                            console.log(product.minutes[i]);
                                                    console.log("min : "+product.minutes[i].minute);
                                                    console.log("value : "+product.minutes[i].value);
                                                    console.log("rmssd : "+product.minutes[i].value.rmssd);
                                                    console.log("coverage : "+product.minutes[i].value.coverage);
                                                    console.log("hf : "+product.minutes[i].value.hf);
                                                    console.log("lf : "+product.minutes[i].value.lf);*/
                        str += "dateOfSleep : " + product.dateOfSleep;
                        str += " duration : " + product.duration;
                        str += " efficiency : " + product.efficiency;
                        str += " endTime : " + product.endTime;
                        str += " infoCode : " + product.infoCode;
                        str += " isMainSleep : " + product.isMainSleep;

                        span.textContent = str;
                        document.body.appendChild(span);
                        document.body.appendChild(br);

                        //}
                        document.body.appendChild(brr);



                    }
                })
                .catch(console.error);

        </script>
</body>

</html>